set (autostart true)
set (preconditions Platform)

map()
   if(PLUGIN_IOCONNECTOR_REPORTING_PIN) 
   map()
       kv(id ${PLUGIN_IOCONNECTOR_REPORTING_PIN})
       kv(mode Both)
       kv(activelow true)
       key(handlers)
       map()
           kv(name Reporter)
           key(config)
           map()
               kv(marker 1)
           end()
           kv(start 0)
           kv(end 5)
       end()
       map()
           kv(name Reporter)
           key(config)
           map()
               kv(marker 2)
           end()
           kv(start 5)
           kv(end 10)
       end()
       map()
           kv(name Reporter)
           key(config)
           map()
               kv(marker 3)
           end()
           kv(start 10)
       end()
   end()
   endif()
   if(PLUGIN_IOCONNECTOR_PAIRING_PIN) 
   map()
      kv(id ${PLUGIN_IOCONNECTOR_PAIRING_PIN})
      kv(mode Both)
      kv(handlers ___array___)
      map()
         kv(name RemotePairing)
         key(config)
         map()
             kv(callsign ${PLUGIN_IOCONNECTOR_PAIRING_CALLSIGN})
             kv(producer ${PLUGIN_IOCONNECTOR_PAIRING_PRODUCER})
         end()
      end()
   end()
   endif() 
end()
ans(configuration)

if(PLUGIN_IOCONNECTOR_PIN1_ID)
map()
   kv(id ${PLUGIN_IOCONNECTOR_PIN1_ID})
   kv(mode ${PLUGIN_IOCONNECTOR_PIN1_MODE})
   kv(activelow ${PLUGIN_IOCONNECTOR_PIN1_STATE})
end()
ans(pin)
map_append(${configuration} pins ___array___)
map_append(${configuration} pins ${pin})
endif()

if(PLUGIN_IOCONNECTOR_PIN2_ID)
map()
   kv(id ${PLUGIN_IOCONNECTOR_PIN2_ID})
   kv(mode ${PLUGIN_IOCONNECTOR_PIN2_MODE})
   kv(activelow ${PLUGIN_IOCONNECTOR_PIN2_STATE})
end()
ans(pin)
map_append(${configuration} pins ___array___)
map_append(${configuration} pins ${pin})
endif()

if(PLUGIN_IOCONNECTOR_PIN3_ID)
map()
   kv(id ${PLUGIN_IOCONNECTOR_PIN3_ID})
   kv(mode ${PLUGIN_IOCONNECTOR_PIN3_MODE})
   kv(activelow ${PLUGIN_IOCONNECTOR_PIN3_STATE})
end()
ans(pin)
map_append(${configuration} pins ___array___)
map_append(${configuration} pins ${pin})
endif()
